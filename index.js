!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("redux-saga/effects")):"function"==typeof define&&define.amd?define(["redux-saga/effects"],n):t["roadhog-saga"]=n(t.reduxSaga_effects)}(this,function(t){"use strict";var n=function(t){if(!/.*_.*/.test(t))throw new Error("Wrong format for action: '"+t+"'. should be '<METHOD_NAME>_<RESOURCE_NAME>' (ie: GET_USERS)")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},o=function(){function t(t,n){var r=[],e=!0,o=!1,u=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done)&&(r.push(i.value),!n||r.length!==n);e=!0);}catch(t){o=!0,u=t}finally{try{!e&&a.return&&a.return()}finally{if(o)throw u}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)},i=function(t){return t.config},a=function(t){return i(t).api},c=function(t){return i(t).mocks},f=function(t){return function(n){return a(n)[t]}},s=function(t){return function(n){return function(r){return f(t)(r)[n]}}},p=function(t){return function(n){return function(r){var o=a(r),u=f(t)(r),i=s(t)(n)(r),c={method:n};return o.options&&(c=e({},c,o.options)),u.options&&(c=e({},c,u.options)),i&&i.options&&(c=e({},c,i.options)),c}}},d=function(t){return function(n){return function(r){var e=f(t)(r),o=s(t)(n)(r);return void 0===o?e:"string"==typeof o?o:o.url}}},y=function(t){return function(n){return function(r){var e=c(r);if(e)return([].concat(u(e.filter(function(t){return t.method===n})),u(e.filter(function(t){return void 0===t.method})),u(e.filter(function(t){return t.method!==n&&void 0!==t.method}))).find(function(n){return n.match.test(t)})||{}).fallback}}},l=function(t){return Array.isArray(t)?t.map(function(t){return encodeURIComponent(t)}):encodeURIComponent(t)},h=function(t){return!t||"object"===(void 0===t?"undefined":r(t))&&0===Object.keys(t).length||Array.isArray(t)&&0===t.length},m=function(t){return function(n){return h(n)?t:t+(t.endsWith("/")?"":"/")+l(n).join("/")}},b=function(t){return function(n){if(h(n))return t;var r=Object.keys(n).map(function(t){return t+"="+l(n[t])}),e=t.endsWith("/")||t.endsWith("&")||t.endsWith("?")?"":"/",o=t.endsWith("&")||t.endsWith("?")?"":"?";return""+t+e+o+r.join("&")}},v=function(n){return regeneratorRuntime.mark(function r(){var u,i,a,c,f,s,y,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=n.split(/_(.+)/),i=o(u,2),a=i[0],c=i[1],r.next=3,t.select(p(c)(a));case 3:return f=r.sent,s=l.body,f="string"==typeof s?e({},f,{body:s}):e({},f,{body:JSON.stringify(s)}),r.next=8,t.select(d(c)(a));case 8:return y=r.sent,y=m(y)(l.path),y=b(y)(l.query),r.abrupt("return",[y,f]);case 12:case"end":return r.stop()}},r,this)})},g=function(t){return regeneratorRuntime.mark(function n(r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.ok||!t){n.next=2;break}return n.abrupt("return",t);case 2:if(204===r.status){n.next=12;break}return n.prev=3,n.next=6,r.json();case 6:return n.abrupt("return",n.sent);case 9:return n.prev=9,n.t0=n.catch(3),n.abrupt("return",void 0);case 12:return n.abrupt("return",void 0);case 13:case"end":return n.stop()}},n,this,[[3,9]])})},x=function(t,n,r){return{type:"API_"+t+"_"+n,payload:r}};return function(r){return regeneratorRuntime.mark(function e(u){var i,a,c,f,s,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(r),e.next=3,v(r)(u);case 3:return i=e.sent,a=o(i,2),c=a[0],f=a[1],e.next=9,t.select(y(c)(f.method));case 9:return s=e.sent,e.next=12,t.put(x(r,"STARTED"));case 12:return e.next=14,fetch(c,f);case 14:return p=e.sent,e.next=17,g(s)(p);case 17:if(d=e.sent,p.ok||s){e.next=21;break}return e.next=21,t.put(x(r,"ERROR",{raw:p,data:d,status:p.status,statusText:p.statusText}));case 21:return e.next=23,t.put(x(r,"END",{raw:p,data:d}));case 23:return e.abrupt("return",d);case 24:case"end":return e.stop()}},e,this)})}});
//# sourceMappingURL=index.js.map
